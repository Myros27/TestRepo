<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grid Battle Prototype</title>
  <link rel="stylesheet" href="style.css">
  <!-- Embed units definitions directly to avoid fetch restrictions -->
  <script id="units-data" type="application/json">
{
  "units": [
    {
      "id": "athlete",
      "name": "Athlete",
      "emoji": "üèÉ",
      "team": "player",
      "stats": {
        "health": 15,
        "speed": 40,
        "movement_ticks": 250
      },
      "attack": {
        "type": "melee",
        "frequency_ticks": 500,
        "rules": [
          {
            "condition": "target_speed > 20",
            "damage": 2
          },
          {
            "condition": "default",
            "damage": 5
          }
        ]
      },
      "behavior": {
        "stop_on_adjacent_enemy": true
      }
    },
    {
      "id": "archer",
      "name": "Archer",
      "emoji": "üèπ",
      "team": "player",
      "stats": {
        "health": 10,
        "speed": 25,
        "movement_ticks": 400
      },
      "attack": {
        "type": "ranged",
        "frequency_ticks": 1200,
        "range_manhattan": 5,
        "damage": 8,
        "projectile_speed": 200
      },
      "behavior": {
        "slow_down": {
          "condition_range_manhattan": 5,
          "new_speed": 7,
          "new_movement_ticks": 1500
        },
        "stop_on_enemy_in_lane": 4
      }
    },
    {
      "id": "bouncer",
      "name": "Bouncer",
      "emoji": "ü¶ç",
      "team": "player",
      "stats": {
        "health": 28,
        "speed": 10,
        "movement_ticks": 1000
      },
      "attack": {
        "type": "melee",
        "frequency_ticks": 600,
        "damage": 12
      },
      "behavior": {
        "stop_on_adjacent_enemy": true
      }
    },
    {
      "id": "rogue",
      "name": "Rogue",
      "emoji": "üî™",
      "team": "player",
      "stats": {
        "health": 3,
        "speed": 29,
        "movement_ticks": 350
      },
      "attack": {
        "type": "melee",
        "frequency_ticks": 1600,
        "damage": 20
      },
      "behavior": {
        "stop_on_enemy_within": 2
      }
    },
    {
      "id": "supporter",
      "name": "Supporter",
      "emoji": "üíâ",
      "team": "player",
      "stats": {
        "health": 5,
        "speed": 18,
        "movement_ticks": 550
      },
      "attack": {
        "type": "melee",
        "frequency_ticks": 100,
        "damage": 1
      },
      "behavior": {
        "heal": {
          "frequency_ticks": 300,
          "range_manhattan": 2,
          "initial_heal": 10
        }
      }
    }
  ]
}
  </script>
</head>
<body>
  <h1>Grid Battle Prototype</h1>
  <!-- Debug panel controls the board size and starts the battle -->
  <div class="debug-panel">
    <button id="add-row">+</button>
    <button id="remove-row">-</button>
    <span class="rows-label">Rows: <span id="row-count">1</span></span>
    <button id="start-battle">Start Battle</button>
  </div>
  <!-- Player and opponent selection bars -->
  <div class="selection-container">
    <div class="selection-bar" id="player-selection">
      <h3>Player Units</h3>
      <div id="player-units" class="units"></div>
    </div>
    <div class="selection-bar" id="opponent-selection">
      <h3>Opponent Units</h3>
      <div id="opponent-units" class="units"></div>
    </div>
  </div>
  <!-- Board container holds the game grid -->
  <div id="board" class="board"></div>
  <!-- Trash bin area for removing units during setup -->
  <div id="trash-bin" class="trash-bin" draggable="false">Trash Bin</div>
  <!-- Message overlay for victory/defeat -->
  <div id="message-overlay" class="message-overlay">
    <div id="message-content"></div>
    <button id="restart-button">Play Again</button>
  </div>
  <script src="script.js"></script>
</body>
</html>